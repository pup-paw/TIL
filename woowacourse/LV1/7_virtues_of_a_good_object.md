# 좋은 객체의 7가지 덕목

## 클래스 vs 객체

### 클래스

    정의
    객체가 태어나는 곳
    (= 객체를 인스턴스화 하는 곳)

    책임
    1. 필요에 따라 새로운 객체를 생성
    2. 더는 사용하지 않을 때 객체를 파괴하는 것

### 객체

    클래스에 의해 생성됨

    한번 생성된 객체는 스스로 동작함
    ＞ 자신을 누가 만들었는지 알아서는 안됨
    ＞ 클래스에 형제 자매가 얼마나 더 있는지 알아서는 안됨

---

## 1. 객체가 현실 세계에 존재한다.

### 객체는 생명체다.

    객체는 자료구조나 함수의 집합이 아님

    객체는 자신만의 생명주기, 행위, 습관을 지닌 독립적인 개체

### 객체는 현실 세계의 피조물을 대표하는 것이다.

    객체는 다른 모든 객체 앞에 있는 현실 세계의 피조물의 대리자임

    피조물이 없다면, 당연히 객체도 존재하지 않음

### 대부분의 GoF 패턴은 안티패턴이다.

    컨트롤러, 파서, 필터, 검증기, 서비스 로케이터, 싱글턴, 팩터리는 좋은 객체가 아님
    ＞ 소프트웨어 밖의 현실세계에서 존재하지 않기 때문
    ＞ 인공적인 가짜 피조물임

🌟 내가 만든 객체 배후에 존재하는 현실 세계의 개체는 무엇일지 고민해보기  
(답을 찾을 수 없다면 리팩터링을 고려해 봐야 함)

---

## 2. 객체가 계약에 따라 동작한다.

### 객체는 자신이 준수하는 계약 때문에 사용되길 예상한다.

### 우리는 아무 객체라도 우리의 계약에 명시된 일을 하도록 예상해야 한다.

    특정 클래스의 일부 특정 객체가 우리를 위해 동작하도록 차별하거나 예상하면 안됨
    ＞ 객체가 우리가 원하는 일을 하기만 하면 됨
    ＞ 그 외의 객체가 만들어진 클래스, 성별, 종교에 관심을 두어서는 안됨

---

## 3. 객체가 고유하다.

### 좋은 객체는 무언가를 캡슐화해야 한다.

    캡슐화할 것이 없다면 객체가 동일한 복제본을 가질 수 있음

### 유틸리티 클래스는 좋은 객체를 인스턴스화할 수 없다.

    유틸리티 클래스는 이번 글에서 언급한 덕목을 아무것도 갖지 않음
    ＞ "클래스" 라고 부를 수 조차 없음

---

## 4. 객체가 불변적이다.

### 좋은 객체는 자신이 캡슐화한 상태를 절대 변경하지 않는다.

    객체는 현실 세계에 존재하는 개체의 대표자임
    ＞ 객체의 전 생에 걸쳐 변하지 않는 채로 머물러야 함
    ＞ 객체는 그것이 대표하는 것들을 배신해서는 안됨 (주인이 바뀔 수 없음)

### 불변성이 언제나 동일한 값을 반환한다는 것을 의미하지는 않는다.

    오히려 좋은 불변 객체는 매우 역동적임
    ＞ 그럼에도 자신의 내부 상태는 절대 변경하지 않음

### 왜 불변성이 덕목일까?

    1. 불변 객체는 생성, 테스트, 사용하기 더 간단함
    2. 진정한 불변 객체는 언제나 thread safe 함
    3. 불변 객체는 시간적 결합을 피하는데 도움이 됨
    4. 방어적 복사를 하지 않아도 됨
    5. 불변 객체는 언제나 실패 원자성을 띔
    6. 불변 객체는 캐싱하기가 훨씬 더 쉬움
    7. 불변 객체는 NULL 참조를 방지함

---

## 5. 객체의 클래스에 정적 멤버가 없다.

### 정적 멤버는 클래스의 행위를 구현하지, 객체의 행위를 구현하지 않는다.

    정적 메서드는 객체지향 프로그래밍을 "클래스지향" 프로그래밍으로 바꿈
    ＞ 정적 메서드는 객체가 아닌 클래스의 행위를 노출함

    정적 메서드를 가진 클래스는 전역 변수에 해당함
    ＞ 해당 변수와의 상호작용을 다른 것들과 고립시킬 수 없음
    ＞ 객체를 범위 분해를 위한 도구로서 사용할 수 없음
    ＞ 객체지향 원칙에 개념적으로 반함

### mocking 이 불가능하다.

### 스레드 안전하지 않다.

    스레드 안전하게 만들수도 있지만 명시적인 동기화가 필요함

🌟 공용 정적 메서드를 보게 될 때마다 즉시 재작성하기

## 6. 객체의 이름이 직명을 나타내지 않는다.

### 객체의 이름은 이 객체가 무엇인지 말해야 한다.

    이 객체가 무슨 일을 하는지 말해서는 안됨
    ＞ 페이지 모음기 대신 "책", 물 보관기 대신 "컵", 몸 감싸개 대신 "티셔츠"

### 일반적으로 "-er" 로 끝나는 이름은 피하라.

🌟 무슨일을 하는지가 아니라 그것이 무엇인지에 관해 생각하기

---

## 7. 객체의 클래스가 Final 이거나 Abstract다.

### 좋은 객체는 final 클래스나 abstract 클래스에서 온다.

    final 클래스 : 상속을 통해 확장할 수 없는 클래스
    ＞ 어떤 식으로도 변경할 수 없는 클래스
    ＞ 원래 동작 그대로 동작하고 그것을 사용하거나 사용하지 않으면 그만임

    abstract 클래스 : 인스턴스를 가질 수 없는 클래스
    ＞ 불완전하고 지금 모습 그대로 사용할 수 없음을 말함

🌟 클래스를 설계할 때는 final 이나 abstract 를 지정해야 하며, 그 중간은 없음
